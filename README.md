每一个java运行程序都是一个虚拟机

此项目涉及数据库编程、网络编程、swing客户端编程。



Server处理监听，Sender处理响应

细节重构：

选择时是按照圆来选择

确定对战



长连接方案：

login时顺带serverport

login成功再处理长连接



UI渲染和游戏逻辑分离

线程池技术



#### 网络编程部分：

中心服务器接受客户端的请求，包括：

- 申请游戏房间

  - 常规移动棋子和吃子，向双方及时更新 GameRoom

  - 申请和棋
  - 申请悔棋

- 账号密码查询
- 挑战大厅
  - 创建挑战(此时不允许参与别人发起的挑战)
  - 参与挑战(包括进入房间和随机匹配)



- 生命周期管理

  - 创建：当两个玩家确认游戏时

  - 运行：持续处理命令直到游戏结束

  - 终止条件：
    a) 游戏正常结束（将死/认输）
    b) 玩家掉线（等待超时后）
    c) 玩家主动退出

---

---

---





#### 游戏客户端部分

- 初始总共32个棋子，分黑方和红方，每方16个。

- 固定黑方在上，红方在下。

- 每方棋子分七类：将(帅)、仕(士)、象(相): 马、车、炮、卒(兵)
- 各类棋子有自己的行走规则，不能超出棋盘范围



![](D:\git-project\ChineseChess\ChineseChess\files\img\chessboard-analysis.jpg)



如图，8x9 的棋盘，有 9x10 个落脚点。

#### 棋子规则

##### 马：

- 只能走日字
- 有蹩脚规则



##### 兵：

- 如果没过河，只能走直线
- 如果过了河，可以左右移动
- 不能后退



##### 帅：

- 只能在王宫移动

- 只能走直线，每次只能走一格

  

##### 炮：

- 只能走直线
- 移动时，中间不能被其它棋子挡住
- 吃子时，中间要有一个棋子做炮脚

​	

##### 仕：

- 只能在王宫移动
- 只能走斜线



##### 象：

- 只能走田字
- 有蹩脚规则
- 不能过河



##### 车：

- 只能走直线
- 移动的目标点中间不能有棋子，吃子同理





#### 扩展内容

UI自适应

聊天功能

回放功能

观战模式

匹配模式

redis优化



#### 主要思路

MainServer新开线程GameThread

#### 重大bug

- 存客户端socket 的 ip 时参数写错了，写成了自己服务器socket的ip